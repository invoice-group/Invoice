<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <script src="js/mui.picker.min.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
    <link href="css/main-head.css" rel="stylesheet"/>
    <link href="css/iconfont.css" rel="stylesheet"/>
    <link href="css/mui.picker.min.css" rel="stylesheet" />
    <script type="text/javascript" charset="utf-8">
      	mui.init();
    </script>
</head>
<body>
	<!-- 侧滑导航根容器 -->
<div class="mui-off-canvas-wrap mui-draggable">
  <!-- 主页面容器 -->
  <div class="mui-inner-wrap">
     <!-- 菜单容器 -->
    <aside class="mui-off-canvas-left">
      <div class="mui-scroll-wrapper">
        <div class="mui-scroll">
          <!-- 菜单具体展示内容 -->
          <div class="background-picture">
          	<div class="blank-box"></div>
          	<div class="together">
          		<img src="source/user.jpg" class="round_icon"  alt="">          		
          	</div>
          	<div class="together user-name">
          		<a style="color: #000000;-webkit-text-stroke: 1px wheat;letter-spacing: 0.04em;">闫凯</a>
          	</div>
          	<div class="table-user">
          		<ul class="mui-table-view">
          		<li class="mui-table-view-cell item">发票图片<span class="mui-badge mui-badge-primary">12</span></li>         		
          		<li class="mui-table-view-cell item">发票信息<span class="mui-badge mui-badge-success">13</span></li>
          		<li class="mui-table-view-cell item uploadpicture">上传图片</li>
				</ul>
          	</div>
          	<div class="logout">
          		<button type="button" class="mui-btn mui-btn-primary login-button">退出登录</button>
          	</div>
          	
          </div>
        </div>
      </div>
    </aside>
    <!-- 主页面标题 -->
    <header class="mui-bar mui-bar-nav"  id="main-head" style="border:1px solid #3366FF;">
      <div id="shaine"><a class="mui-icon iconfont icon-yonghu mui-action-menu mui-icon-bars mui-pull-left yonghucehua" id="main-icon"></a></div>
      <h1 class="mui-title">首页</h1>
      <div id="shaine"><a class="mui-icon iconfont icon-jiahao mui-action-menu mui-icon-bars mui-pull-right uploadpicture" id="main-icon"></a></div>
    </header>
    <!-- 主页面内容容器 -->
    <div class="mui-content mui-scroll-wrapper" id="main-text">
      <div class="mui-scroll">
        	<!--下拉刷新容器-->
		<div id="pullrefresh" class="mui-content">
			<!--数据列表-->
			<p class="title-information">发票信息</p>
			<table width="100%" class="table" id="tablevalue">
				<tr><th width=30%>发票代码</th><th width=20%>类别</th><th width=20%>金额</th><th width=30%>日期</th></tr>
				<tr><td class="edit-id">12331</td><td class="edit-class">汉语</td><td class="edit-num">31312</td><td id="edit-date">2018.1.3</td></tr>
                <tr><td class="edit-id">12331</td><td class="edit-class">汉语</td><td class="edit-num">31312</td><td id="edit-date">1月3日</td></tr>
                
    		</table>
		</div>
		
      </div>
    </div>  
  </div>
</div>
	
</body>
<script>
mui('#main-head').on('tap', '.uploadpicture', function() {
	console.log("active");
	mui.openWindow({
    url:"picture.html",
    id:"picture",
    styles:{

    },
    extras:{
    },
    createNew:false,//是否重复创建同样id的webview，默认为false:不重复创建，直接显示
    show:{
      autoShow:true,//页面loaded事件发生后自动显示，默认为true
      
    },
    waiting:{
      autoShow:true,//自动显示等待框，默认为true
      title:'正在加载...',//等待对话框上显示的提示内容
      options:{
      }
    }
})
	//mui.trigger(document.getElementByClassName("mui-content"),'swiperight');
});
mui('.mui-scroll').on('tap', '.user-name', function() {
	console.log("active");
	mui.openWindow({
    url:"login.html",
    id:"login",
    styles:{

    },
    extras:{
    },
    createNew:false,//是否重复创建同样id的webview，默认为false:不重复创建，直接显示
    show:{
      autoShow:true,//页面loaded事件发生后自动显示，默认为true
      
    },
    waiting:{
      autoShow:true,//自动显示等待框，默认为true
      title:'正在加载...',//等待对话框上显示的提示内容
      options:{
      }
    }
})
	//mui.trigger(document.getElementByClassName("mui-content"),'swiperight');
});
mui('.mui-scroll').on('tap', '.uploadpicture', function() {
	console.log("active");
	mui.openWindow({
    url:"picture.html",
    id:"picture",
    styles:{

    },
    extras:{
    },
    createNew:false,//是否重复创建同样id的webview，默认为false:不重复创建，直接显示
    show:{
      autoShow:true,//页面loaded事件发生后自动显示，默认为true
      
    },
    waiting:{
      autoShow:true,//自动显示等待框，默认为true
      title:'正在加载...',//等待对话框上显示的提示内容
      options:{
      }
    }
})
	//mui.trigger(document.getElementByClassName("mui-content"),'swiperight');
});
mui('.mui-scroll').on('tap', '.edit-id', function() {
	mui.prompt('请输入你想修改的发票代码','发票代码','修改发票代码',['确认','取消'],null,'div');
});
mui('.mui-scroll').on('tap', '.edit-class', function() {
	mui.prompt('请输入你想修改的发票类别','发票类别','修改发票类别',['确认','取消'],null,'div');
});
mui('.mui-scroll').on('tap', '.edit-num', function() {
	mui.prompt('请输入你想修改的发票金额','发票金额','修改发票金额',['确认','取消'],null,'div');
});
document.getElementById("edit-date").addEventListener('tap', function() {
	console.log("bug");
    var dtpicker = new mui.DtPicker({
    type: "date",//设置日历初始视图模式 
    beginDate: new Date(1900, 01, 01),//设置开始日期 
    endDate: new Date(2050, 12, 30),//设置结束日期 
    labels: ['Year', 'Mon', 'Day'],//设置默认标签区域提示语 
    customData: { 
    }//时间/日期别名 
	}) 
	dtpicker.show(function(e) {
	    console.log(e);
	}) 
}, false);
mui.init({
				pullRefresh: {
					container: '#pullrefresh',
					down: {
						style:'circle',
						callback: pulldownRefresh
					},
					up: {
						auto:true,
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				}
			});
			
			var count = 0;
			function pullupRefresh() {
				setTimeout(function() {
					mui('#pullrefresh').pullRefresh().endPullup((++count > 2)); //参数为true代表没有更多数据了。
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell');
					var newCount = cells.length>0?5:20;//首次加载20条，满屏
					for (var i = cells.length, len = i + newCount; i < len; i++) {
						var li = document.createElement('li');
					//	li.className = 'mui-table-view-cell';
					//	li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
						table.appendChild(li);
					}
				}, 1500);
			}

			function addData() {
				var table = document.body.querySelector('.mui-table-view');
				var cells = document.body.querySelectorAll('.mui-table-view-cell');
				for(var i = cells.length, len = i + 5; i < len; i++) {
					var li = document.createElement('li');
					//li.className = 'mui-table-view-cell';
					//li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
					//下拉刷新，新纪录插到最前面；
					table.insertBefore(li, table.firstChild);
				}
			}
			/**
			 * 下拉刷新具体业务实现
			 */
			function pulldownRefresh() {
				setTimeout(function() {
					addData();
					mui('#pullrefresh').pullRefresh().endPulldown();
					mui.toast("为你推荐了5篇文章");
				}, 1500);
			}
</script>
</html>